@model HiveData.ViewModels.ExpandResultsVM
@using PagedList.Mvc;


@{
    ViewBag.Title = "Search";
}

<h2>ExpandResults</h2>
<hr />

@foreach (var item in Model.PostList)
{
    <div class="container">
        <div class="well">
            <div class="media">
                <a class="pull-left" href="@Url.Action("ViewProfile", "Profile", new { id = Model.GetProfileId(item.PostId) })" )">
                    @if (@Model.GetUserPicture(item.PostId) == null)
                    {
                        <img src="~/Content/Img/profile-image-placeholder.png" width="64" height="64" />
                    }
                    else
                    {
                        <img src="~/@Model.GetUserPicture(item.PostId)" width="64" height="64" />
                    }
                </a>
                <div class="media-body">
                    <h4 class="media-heading">
                        @Html.ActionLink(@Model.GetFirstName(item.PostId) + " " + Model.GetLastName(item.PostId),
                   "ViewProfile", "Profile", new { id = Model.GetProfileId(item.PostId) }, new { })
                </h4>
                <p>
                    @item.PostContent
                </p>
                <ul class="list-inline list-unstyled">
                    <li> @item.DatePosted </li>
                    <li>|</li>
                    @if (item.Awards < 2)
                    {
                        <li> @item.Awards Award</li>
                    }
                    else
                    {
                        <li> @item.Awards Awards</li>
                    }
                    @if (item.Popular == true)
                    {
                        <li><strong>Popular</strong></li>
                    }
                </ul>
                <ul class="list-inline list-unstyled">
                    @if (Model.AwardGiven(item.PostId) == true)
                    {
                        <li><strong>@Html.ActionLink("Revoke", "RevokeAward", "Post", new { id = item.PostId }, new { })</strong></li>
                    }
                    else
                    {
                        <li>@Html.ActionLink("Award", "GiveAward", "Post", new { id = item.PostId }, new { })</li>
                    }
                    <li>|</li>
                    <li>@Html.ActionLink("Comment", "Create", "Comment", new { id = item.PostId }, new { })</li>
                    <li>|</li>
                    <li>@Html.ActionLink("Share", "")</li>
                    <li>|</li>
                    <li>@Html.ActionLink("View Comments", "ViewPostComments", "Post", new { id = item.PostId }, new { }) (@item.PostComments.Count)</li>

                    @if (Model.IsUserPost(item.PostId) == true || ViewBag.IsAdmin)
                    {
                        <li>|</li>
                        <li> @Html.ActionLink("Remove", "DeletePost", "Post", new { id = item.PostId }, null) </li>
                        <li>|</li>
                        <li> @Html.ActionLink("Edit", "EditPost", "Post", new { id = item.PostId }, null) </li>
                    }

                </ul>

            </div>
        </div>
    </div>
</div>
}

    Page @(Model.PostList.PageCount < Model.PostList.PageNumber ? 0 : Model.PostList.PageNumber) of @Model.PostList.PageCount
    @Html.PagedListPager(Model.PostList, page => Url.Action("ExpandResults", new { page }))



